# 当布局的时候，到底发生了什么呢
在iOS中布局是一件经常发生的事情，但是当布局一个视图的时候会发生什么呢？
## 1，update constraints
视图和它的子视图被发送 updateconstraints，从最深的视图层级底部开始工作到视图本身（顶部可能是根视图），如果一个视图的约束没有改变，那么这个事件可能会被忽略，但是对于层次结构顶端的视图，它肯定会被调用。
你能重写updateConstraints在UIView的子类中，你或许会那样做，例如，如果您的子类能够改变它自己的约束，并且您需要一个信号，现在就是这样做的时候了。您必须调用super，否则应用程序将崩溃(有一个有用的错误消息)。
你不应该直接调用updateConstraints，去出发一个立刻的调用到updateConstraints，发送一个视图updateConstraintsIfNeeded消息，但是updateConstraints或许仍然没有被发送除非约束已经改变或者视图在层级的顶部，去强制updateConstraints被发送到一个视图，发送它setNeedsUpdateConstraints消息
## 2，layoutSubviews
视图和它的自视图被发送layoutSubviews，从视图本身的顶部（可能是根视图）开始到最深视图的底部
你能重写layoutSubviews在你的子类中为了在布局过程中方便，如果你没有使用autolayout，layoutsubview默认不做什么，layoutSubviews是你的寄回去执行手动布局（在autoresizing已经发生），如果你正在使用autolayout，你必须调super否则你的app将会崩溃
你不应该直接调用layoutsubviews，去立刻触发调用到layoutSubviews，发送一个视图layoutIfNeeded消息，或者发送一个setNeedsLayout去触发一个调用到layoutSubviews，你的代码完成运行后，你的layout通常也发生了
当你使用autolyaout的时候，在layoutSubviews中发生了什么呢？这个运行时检查了影响这个视图子视图的所有约束，为他们的frame而工作，赋值这些视图这些frame，换言之，layoutSubviews执行了手动布局

